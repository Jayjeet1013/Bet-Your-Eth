(this.webpackJsonpchainlink_betting_game=this.webpackJsonpchainlink_betting_game||[]).push([[0],{184:function(e,t,n){e.exports=n.p+"static/media/dice_rolling.c0ab6380.gif"},185:function(e,t,n){e.exports=n.p+"static/media/dice_logo.53f49b58.png"},186:function(e,t,n){e.exports=n.p+"static/media/dice.fc8d2280.webp"},189:function(e,t,n){e.exports=n(460)},207:function(e,t){},216:function(e,t){},234:function(e,t){},236:function(e,t){},253:function(e,t){},254:function(e,t){},256:function(e,t){},257:function(e,t){},325:function(e,t){},327:function(e,t){},336:function(e,t){},338:function(e,t){},363:function(e,t){},365:function(e,t){},371:function(e,t){},372:function(e,t){},374:function(e,t){},386:function(e,t){},389:function(e,t){},394:function(e,t){},405:function(e,t){},408:function(e,t){},460:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(183),s=n.n(r),l=(n(194),n(11)),o=n.n(l),c=n(34),u=n(184),m=n.n(u),p=n(60),d=n.n(p);n(62);class b extends a.Component{render(){return i.a.createElement("div",{className:"container-fluid mt-5 col-m-4",style:{maxWidth:"550px"}},i.a.createElement("div",{className:"col-sm"},i.a.createElement("main",{role:"main",className:"col-lg-12 text-monospace text-center text-white"},i.a.createElement("div",{className:"content mr-auto ml-auto"},i.a.createElement("div",{id:"content",className:"mt-3"},i.a.createElement("div",{className:"card mb-4 bg-dark border-danger"},i.a.createElement("div",{className:"card-body"},i.a.createElement("div",null,i.a.createElement("a",{href:"http://www.dappuniversity.com/bootcamp",target:"_blank",rel:"noopener noreferrer"},i.a.createElement("img",{src:m.a,width:"225",alt:"logo"}))),"\xa0",i.a.createElement("p",null),i.a.createElement("div",{className:"input-group mb-4"},i.a.createElement("input",{id:"disabledInput",type:"text",className:"form-control form-control-md",placeholder:"rolling...",disabled:!0}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("div",{className:"input-group-text"},i.a.createElement("img",{src:d.a,height:"20",alt:""}),"\xa0",i.a.createElement("b",null,"ETH")))),i.a.createElement("button",{type:"submit",className:"btn btn-secondary btn-lg",onClick:e=>{}},"Low"),"\xa0\xa0\xa0",i.a.createElement("button",{type:"submit",className:"btn btn-secondary btn-lg",onClick:e=>{}},"High")),i.a.createElement("div",null,this.props.balance?i.a.createElement("div",{className:"float-right",style:{width:"220px"}},i.a.createElement("div",{className:"float-left",style:{height:"17px"}},i.a.createElement("b",null,"MaxBet\xa0")),i.a.createElement("div",{className:"float-right",style:{height:"17px"}},Number(this.props.web3.utils.fromWei(this.props.maxBet.toString())).toFixed(5)," ",i.a.createElement("b",null,"ETH\xa0")),i.a.createElement("br",null),i.a.createElement("div",{className:"float-left",style:{height:"17px"}},i.a.createElement("b",null,"MinBet"),"($1)\xa0"),i.a.createElement("div",{className:"float-right",style:{height:"17px"}},Number(this.props.web3.utils.fromWei(this.props.minBet.toString())).toFixed(5)," ",i.a.createElement("b",null,"ETH\xa0")),i.a.createElement("br",null),i.a.createElement("div",{className:"float-left"},i.a.createElement("b",null,"Balance\xa0")),i.a.createElement("div",{className:"float-right"},Number(this.props.web3.utils.fromWei(this.props.balance.toString())).toFixed(5)," ",i.a.createElement("b",null,"ETH\xa0"))):i.a.createElement("div",{id:"loader",className:"spinner-border float-right",role:"status"}))))))))}}var h=b,y=n(185),f=n.n(y);class w extends a.Component{render(){return i.a.createElement("nav",{className:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow text-monospace"},i.a.createElement("a",{className:"navbar-brand col-sm-3 col-md-2 mr-0",href:"http://www.dappuniversity.com/bootcamp",target:"_blank",rel:"noopener noreferrer"},i.a.createElement("img",{src:f.a,height:"32",alt:"logo"}),"B3tt1ng G@m3"),this.props.account?i.a.createElement("li",{className:"nav-item text-nowrap d-none d-sm-none d-sm-block"},i.a.createElement("a",{className:"text-white",href:"https://rinkeby.etherscan.io/address/"+this.props.account,target:"_blank",rel:"noopener noreferrer"},this.props.account),"\xa0"):i.a.createElement("div",{id:"loader",className:"spinner-border text-light",role:"status"}))}}var g=w,x=n(186),E=n.n(x);class v extends a.Component{render(){return i.a.createElement("div",{className:"container-fluid mt-5 col-m-4",style:{maxWidth:"550px"}},i.a.createElement("div",{className:"col-sm"},i.a.createElement("main",{role:"main",className:"col-lg-12 text-monospace text-center text-white"},i.a.createElement("div",{className:"content mr-auto ml-auto"},i.a.createElement("div",{id:"content",className:"mt-3"},i.a.createElement("div",{className:"card mb-4 bg-dark border-danger"},i.a.createElement("div",{className:"card-body"},i.a.createElement("div",null,i.a.createElement("a",{href:"http://www.dappuniversity.com/bootcamp",target:"_blank",rel:"noopener noreferrer"},i.a.createElement("img",{src:E.a,width:"225",alt:"logo"}))),"\xa0",i.a.createElement("p",null),i.a.createElement("div",{className:"input-group mb-4"},i.a.createElement("input",{type:"number",step:"0.01",className:"form-control form-control-md",placeholder:"bet amount...",onChange:e=>this.props.onChange(e.target.value),required:!0}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("div",{className:"input-group-text"},i.a.createElement("img",{src:d.a,height:"20",alt:""}),"\xa0",i.a.createElement("b",null,"ETH")))),i.a.createElement("button",{type:"submit",className:"btn btn-danger btn-lg",onClick:e=>{if(e.preventDefault(),new RegExp("^[0-9]*.?[0-9]+$").test(this.props.amount)){var t=this.props.amount.toString();this.props.makeBet(0,this.props.web3.utils.toWei(t))}else window.alert("Please type positive interger or float numbers")}},"Low"),"\xa0\xa0\xa0",i.a.createElement("button",{type:"submit",className:"btn btn-success btn-lg",onClick:e=>{e.preventDefault();var t=new RegExp("^[0-9]*.?[0-9]+$"),n=Number(this.props.web3.utils.fromWei(this.props.minBet.toString())).toFixed(5);if(t.test(this.props.amount)&&this.props.amount>=n){var a=this.props.amount.toString();this.props.makeBet(1,this.props.web3.utils.toWei(a))}else window.alert("Please make sure that:\n*You typed positive interger or float number\n* Typed value is >= than MinBet (not all ETH decimals visible)\n* You are using Rinkeby network")}},"High")),i.a.createElement("div",null,this.props.balance?i.a.createElement("div",{className:"float-right",style:{width:"220px"}},i.a.createElement("div",{className:"float-left",style:{height:"17px"}},i.a.createElement("b",null,"MaxBet\xa0")),i.a.createElement("div",{className:"float-right",style:{height:"17px"}},Number(this.props.web3.utils.fromWei(this.props.maxBet.toString())).toFixed(5)," ",i.a.createElement("b",null,"ETH\xa0")),i.a.createElement("br",null),i.a.createElement("div",{className:"float-left",style:{height:"17px"}},i.a.createElement("b",null,"MinBet"),"($1)\xa0"),i.a.createElement("div",{className:"float-right",style:{height:"17px"}},Number(this.props.web3.utils.fromWei(this.props.minBet.toString())).toFixed(5)," ",i.a.createElement("b",null,"ETH\xa0")),i.a.createElement("br",null),i.a.createElement("div",{className:"float-left"},i.a.createElement("b",null,"Balance\xa0")),i.a.createElement("div",{className:"float-right"},Number(this.props.web3.utils.fromWei(this.props.balance.toString())).toFixed(5)," ",i.a.createElement("b",null,"ETH\xa0"))):i.a.createElement("div",{id:"loader",className:"spinner-border float-right",role:"status"}))))))))}}var N=v,k=n(187),B=n.n(k);class T extends a.Component{componentWillMount(){var e=this;return Object(c.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadWeb3();case 2:case"end":return t.stop()}}),t)})))()}loadWeb3(){var e=this;return Object(c.a)(o.a.mark((function t(){var n,a,i,r,s,l,u,m,p;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"===typeof window.ethereum||e.state.wrongNetwork){t.next=24;break}return window.ethereum.autoRefreshOnNetworkChange=!1,r=new B.a(window.ethereum),e.setState({web3:r}),m=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Received",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bet",type:"uint256"},{indexed:!1,internalType:"uint256",name:"randomSeed",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"address",name:"player",type:"address"},{indexed:!1,internalType:"uint256",name:"winAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"randomResult",type:"uint256"},{indexed:!1,internalType:"uint256",name:"time",type:"uint256"}],name:"Result",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"admin",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[{internalType:"uint256",name:"bet",type:"uint256"},{internalType:"uint256",name:"seed",type:"uint256"}],name:"game",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"requestId",type:"bytes32"},{internalType:"uint256",name:"randomness",type:"uint256"}],name:"rawFulfillRandomness",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_keyHash",type:"bytes32"},{internalType:"uint256",name:"_fee",type:"uint256"},{internalType:"uint256",name:"_seed",type:"uint256"}],name:"requestRandomness",outputs:[{internalType:"bytes32",name:"requestId",type:"bytes32"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"},{inputs:[{internalType:"uint256",name:"random",type:"uint256"}],name:"verdict",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawEther",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawLink",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"admin",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"ethInUsd",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"gameId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"games",outputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"bet",type:"uint256"},{internalType:"uint256",name:"seed",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address payable",name:"player",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastGameId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"randomResult",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"weiInUsd",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],p="0x2FeF79F6b8777D4C13E2D7be422628A5B458b7ad",u=new r.eth.Contract(m,p),t.next=9,r.eth.getAccounts();case 9:if("undefined"===typeof(n=t.sent)[0]||null===n[0]){t.next=21;break}return t.next=13,r.eth.getBalance(n[0]);case 13:return i=t.sent,t.next=16,r.eth.getBalance(p);case 16:return s=t.sent,t.next=19,u.methods.weiInUsd().call();case 19:l=t.sent,e.setState({account:n[0],balance:i,minBet:l,maxBet:s});case 21:e.setState({contract:u,contractAddress:p}),window.ethereum.on("accountsChanged",function(){var t=Object(c.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"===typeof n[0]||null===n[0]){t.next=13;break}return t.next=3,r.eth.getBalance(n[0]);case 3:return i=t.sent,t.next=6,r.eth.getBalance(p);case 6:return s=t.sent,t.next=9,u.methods.weiInUsd().call();case 9:l=t.sent,e.setState({account:n[0],balance:i,minBet:l,maxBet:s}),t.next=14;break;case 13:e.setState({account:null,balance:0});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),window.ethereum.on("chainChanged",function(){var t=Object(c.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(4===(a=parseInt(n,16))){t.next=5;break}e.setState({wrongNetwork:!0}),t.next=17;break;case 5:if(!e.state.account){t.next=16;break}return t.next=8,e.state.web3.eth.getBalance(e.state.account);case 8:return i=t.sent,t.next=11,e.state.web3.eth.getBalance(e.state.contractAddress);case 11:return s=t.sent,t.next=14,e.state.contract.methods.weiInUsd().call();case 14:l=t.sent,e.setState({balance:i,maxBet:s,minBet:l});case 16:e.setState({network:a,loading:!1,onlyNetwork:!1,wrongNetwork:!1});case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 24:case"end":return t.stop()}}),t)})))()}makeBet(e,t){var n=this;return Object(c.a)(o.a.mark((function a(){var i;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.state.web3.eth.net.getId();case 2:4!==a.sent?n.setState({wrongNetwork:!0}):"undefined"!==typeof n.state.account&&null!==n.state.account?(i=Math.floor(Math.random()*Math.floor(1e9)),n.state.contract.methods.game(e,i).send({from:n.state.account,value:t}).on("transactionHash",e=>{n.setState({loading:!0}),n.state.contract.events.Result({},function(){var e=Object(c.a)(o.a.mark((function e(t,a){var i,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("0"===a.returnValues.winAmount?window.alert("lose :("):window.alert("WIN!"),null===n.state.account||"undefined"===typeof n.state.account){e.next=10;break}return e.next=5,n.state.web3.eth.getBalance(n.state.account);case 5:return i=e.sent,e.next=8,n.state.web3.eth.getBalance(n.state.contractAddress);case 8:r=e.sent,n.setState({balance:i,maxBet:r});case 10:n.setState({loading:!1});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}).on("error",e=>{window.alert("Error")})):window.alert("Problem with account or network");case 4:case"end":return a.stop()}}),a)})))()}onChange(e){this.setState({amount:e})}constructor(e){super(e),this.state={account:null,amount:null,balance:null,contract:null,event:null,loading:!1,network:null,maxBet:0,minBet:0,web3:null,wrongNetwork:!1,contractAddress:null},this.makeBet=this.makeBet.bind(this),this.setState=this.setState.bind(this),this.onChange=this.onChange.bind(this)}render(){return i.a.createElement("div",null,i.a.createElement(g,{account:this.state.account}),"\xa0",this.state.wrongNetwork?i.a.createElement("div",{className:"container-fluid mt-5 text-monospace text-center mr-auto ml-auto"},i.a.createElement("div",{className:"content mr-auto ml-auto"},i.a.createElement("h1",null,"Please Enter Rinkeby Network"))):this.state.loading?i.a.createElement(h,{balance:this.state.balance,maxBet:this.state.maxBet,minBet:this.state.minBet,web3:this.state.web3}):i.a.createElement(N,{amount:this.state.amount,balance:this.state.balance,makeBet:this.makeBet,onChange:this.onChange,maxBet:this.state.maxBet,minBet:this.state.minBet,loading:this.state.loading,web3:this.state.web3}))}}var M=T;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},60:function(e,t,n){e.exports=n.p+"static/media/eth.cd488de3.png"},62:function(e,t,n){}},[[189,1,2]]]);
//# sourceMappingURL=main.5fefec8b.chunk.js.map